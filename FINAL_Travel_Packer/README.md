# Travel Pack AI 🌨️🧳📸🤖 

## **About the Project**

The **AI Travel Packing List Assistant** is a smart tool designed to simplify travel preparation. 

Packing can be stressful, with forgotten essentials or overpacking as common issues. Travel Pack AI eliminates this hassle by creating personalized packing lists based on your trip details such as the duration, weather and activities, and verifying your packed items using AI-powered image analysis. It uses AI models like **OpenAI GPT-4** for text generation and **Google OWLv2** for object detection. This is a new way to make travel preparation efficient and fun.  

---

## **Table of Contents**

1. [About the Project](#about-the-project)  
2. [Features](#features)
3. [Usage](#usage)
4. [How to Clone This Project](#how-to-clone-this-project)
5. [Tech Stack](#tech-stack)
6. [Getting Started](#getting-started)
7. [Building the Application](#building-the-application)
8. [Project Structure](#project-structure)
9. [API Integration](#api-integration)
10. [Deployment](#deployment)


---

## **Features**
- **Collect trip details**: Destination, duration, activities, weather, and personal preferences.
- **Generate Weather-based Packing Lists**: Personalized lists based on location and trip duration.
- **AI Image Analysis**: Detect packed items from uploaded images using a Python backend with FastAPI.
- **User-Friendly Interface**: Modern UI with React and Tailwind CSS.
- **APIs**: Integrates weather and AI APIs for accurate suggestions.

---

## **Usage**
1. Enter trip details (destination, dates, activities, preferences) in the input form.
2. Receive a customized packing list generated by AI.
3. Upload an image of your packed items to verify completeness.
4. Use the interactive checklist to ensure everything is ready for your trip.

### **Demo**

<img width="553" alt="demo" src="https://github.com/user-attachments/assets/7435a6ee-c9e3-4f19-a86f-a06c59b9429f" />

<img width="617" alt="Screenshot 2024-12-19 at 11 44 58" src="https://github.com/user-attachments/assets/36b72bc0-47eb-4cc8-ac15-0bde530e6d9d" />

---

## **How to Clone This Project**

Follow these steps to clone and run the project locally:

1. **Create a new Next.js project**:  
   Run the following commands in your terminal:

   ```bash
   npx create-next-app travel-pack-ai
   cd travel-pack-ai
   ```

2. **Install Required Dependencies**:  
   Install the necessary packages for both frontend and backend functionality:

   ```bash
   # Frontend dependencies
   npm install ai openai
   npm install @ai-sdk/openai
   npm install @radix-ui/react-label @radix-ui/react-slot class-variance-authority clsx tailwind-merge lucide-react
   npm install tailwindcss postcss autoprefixer

   # Backend dependencies (Python)
   pip install fastapi uvicorn transformers torch pillow
   ```

3. **Replace Files with Provided Code**:  
   - Download the code from the repository:  
     ```bash
     git clone https://github.com/zulalakarsu/encode-projects.git
     ```

   - Copy the files from `FINAL_Travel_Packer` into your project:  
     - Replace the following directories and files in your **Next.js project**:
       ```plaintext
       - app/api/
       - app/components/
       - app/utils/
       - backend/
       - globals.css
       - layout.tsx
       - page.tsx
       ```

   - Ensure all required files are moved into their respective folders.

4. **Set Up Environment Variables**:  
   Create a `.env.local` file in the root of your project and add the following keys:

   ```env
   OPENAI_API_KEY=sk-proj-xxxxx
   WEATHER_API_KEY=xxxxx
   HUGGINGFACE_TOKEN=hf_xxxxx
   ```

   Replace `xxxxx` with your actual API keys.

5. **Run the Backend Server**:  
   Navigate to the `backend` folder and start the FastAPI server:

   ```bash
   cd backend
   uvicorn object_detection:app --reload --port 8000
   ```

6. **Run the Frontend**:  
   In a new terminal, start the Next.js development server:

   ```bash
   npm run dev
   ```

7. **Access the Application**:  
   Open [http://localhost:3000](http://localhost:3000) in your browser to test the app.

---

## **Tech Stack**

**Frontend**:  
- Framework: **Next.js**  
- UI Components: **Radix UI**, **Lucide React**  
- Styling: **Tailwind CSS**  

**Backend**:  
- Server Framework: **FastAPI** (Python)  
- Object Detection: HuggingFace Transformers (OWLv2 model)  
- Text Generation: **OpenAI GPT-4**  

**APIs**:  
- **WeatherAPI** for weather forecasts  
- **OpenAI** for text generation  

**Hosting**: 
- **Vercel** and **Render** for deployment.

---

## **Getting Started**

### Prerequisites

- **Node.js** (>= 18.x) and **npm** (>= 10.x)  
- **Python** (>= 3.8) with `pip`  

---

## **Building the Application**

### **Step 1: Setup the Frontend**

1. Scaffold a **Next.js** project:
   ```bash
   npx create-next-app travel-pack-ai
   cd travel-pack-ai
   ```

2. Install dependencies:
   ```bash
   npm install ai openai
   npm install @ai-sdk/openai
   npm install @radix-ui/react-label @radix-ui/react-slot class-variance-authority clsx tailwind-merge lucide-react
   npm install tailwindcss postcss autoprefixer
   ```

3. Initialize Tailwind CSS:
   ```bash
   npx tailwindcss init
   ```

---

### **Step 2: Setup the Backend**

1. Navigate to the `backend` folder (create if it doesn't exist):
   ```bash
   mkdir backend
   cd backend
   ```

2. Install Python dependencies on a virtual environment:
   ```bash
   python -m venv venv
   source venv/bin/activate  # Activate the virtual environment
   pip install fastapi uvicorn transformers torch pillow
   ```

3. Create the `object_detection.py` file and paste the provided code for the object detection API using HuggingFace OWLv2.

4. Run the backend server:
   ```bash
   uvicorn object_detection:app --host 0.0.0.0 --port 8000 --reload
   ```

---

### **Step 3: Project Structure**

Organize your project folders as follows:

```plaintext
app/
│── api/
│   ├── analyze-packed-items/
│   │   └── route.ts
│   ├── generate-packing-list/
│   │   └── route.ts
│   ├── weather/
│   │   └── route.ts
│
│── backend/
│   ├── object_detection.py
│   └── requirements.txt
│
│── components/
│   ├── ImageUpload.tsx
│   ├── PackingList.tsx
│   └── TripDetailsForm.tsx
│
│── utils/
│   ├── fetchWeather.ts
│   ├── generatePackingList.ts
│   └── identifyPackedItems.ts
│
├── globals.css
├── layout.tsx
└── page.tsx
```

---

### **Step 4: Connect APIs**

1. **Weather API**:  
   - Sign up at [WeatherAPI](https://www.weatherapi.com/).  
   - Get your API key.

2. **Text Generation (OpenAI)**:  
   - Use OpenAI GPT-4.  
   - Get your API key from [OpenAI](https://platform.openai.com/).

3. **Object Detection (Python Backend)**:  
   - The backend uses HuggingFace transormers and OWLv2 model to perform zero-shot object detection.  

4. Add the API keys to **`.env.local`**:
   ```env
   OPENAI_API_KEY=sk-proj-xxxxx
   WEATHER_API_KEY=xxxxx
   ```

---

### **Step 5: Test the Application**

1. Start the backend:
   ```bash
   cd backend
   uvicorn object_detection:app --reload --port 8000
   ```

2. Start the frontend:
   ```bash
   npm run dev
   ```

3. Visit [http://localhost:3000](http://localhost:3000) to view the app.

---

## **API Integration**

1. **Weather Endpoint**:  
   - Fetches weather forecasts for a given date range.  
   - File: `app/api/weather/route.ts`

2. **Generate Packing List**:  
   - Generates a packing list using OpenAI.  
   - File: `app/api/generate-packing-list/route.ts`

3. **Analyze Packed Items**:  
   - Sends uploaded images to the Python backend for object detection.  
   - File: `app/api/analyze-packed-items/route.ts`

4. **Backend Object Detection**:  
   - File: `backend/object_detection.py`  
   - Endpoint: `POST /detect`  
   - Description:  
     - Accepts a **base64-encoded image** and a **packing list**.  
     - Returns detected items, matched items, missing items, and an annotated image.

---

### **Deployment**

#### **Render Deployment**

1. **Backend (API Server)**:
   - I deployed the backend using **Render** to serve the object detection and packing list generation functionality.
   - The backend uses:
     - **FastAPI**: Python framework for handling API requests.
     - **HuggingFace Transformers**: For object detection with the OWLv2 model.
     - The `requirements.txt` file is used to install dependencies.

2. **Deployment Steps**:
   - Uploaded the backend folder to a repository.
   - Configured Render to deploy from the backend directory.
   - Render automatically detected the Python environment and installed required dependencies.
   - The server was launched successfully, and the API endpoints are now live.

3. **API Endpoints**:
   - `/detect`: Verifies packed items from an uploaded image.
   - Example POST requests can be made using tools like **curl** or Postman.

4. **Status**:
   - ✅ Successfully deployed and functional on Render.

---

#### **Vercel Deployment**

1. **Frontend and API Deployment**:
   - Deployed the frontend (Next.js app) and API routes on **Vercel**.
   - Vercel serves the frontend and runs serverless functions for the API endpoints.

2. **Timeout Limitation**:
   - The `/api/generate-packing-list` endpoint, which generates packing lists using the OpenAI API and fetches weather details, exceeds the **10-second execution time limit** on Vercel's **free plan**.
   - As a result, the deployment on Vercel does not fully function for generating the packing list.

3. **Steps Taken**:
   - Frontend deployed successfully.
   - The weather API fetches data correctly.
   - Timeout occurs when generating the packing list due to processing time.

4. **Next Steps**:
   - Optimize the serverless function to reduce response time.
   - Upgrade to Vercel's Pro plan to increase the timeout limit.

#### **Temporary Solution**

For now, the backend API is fully functional on Render. To test the app end-to-end:
- Use the Render backend endpoint in the frontend code.

